{"version":3,"sources":["webpack:///./js/preloader/preloader.js","webpack:///./js/services/apiService.js","webpack:///./js/photos/photosWithSearch.js","webpack:///./templates/photoCard.hbs","webpack:///./templates/photosList.hbs"],"names":["preloaderFactory","selector","element","document","querySelector","hide","this","classList","add","show","remove","query","page","fetch","BASE_URL","rawResult","ok","json","result","preloader","photos","searchQuery","observeEnable","addObserver","observerHandler","debounce","entries","isIntersecting","searchPhotos","observer","IntersectionObserver","rootMargin","observerElement","createElement","insertAdjacentElement","observe","renderPhotos","photosToRender","map","photo","photosList","photosListTemplate","innerHTML","photosService","console","log","hits","init","searchHandler","target","name","value","addEventListener","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","escapeExpression","alias2","nullContext","alias3","hooks","helperMissing","alias4","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","lambda","stack1","invokePartial","decorators","program","noop"],"mappings":"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","file":"main.4bbdd2b74c955c068b89.js","sourcesContent":["const preloaderFactory = selector => {\n  return {\n    element: document.querySelector(selector),\n    hide() {\n      this.element.classList.add('disable');\n    },\n    show() {\n      this.element.classList.remove('disable');\n    },\n  };\n};\n\nexport default preloaderFactory;\n","const BASE_URL = 'https://pixabay.com/api/'; // API_URL\n// const query = ''; // что_искать\n// const page = '1'; // номер_страницы\nconst KEY = '21420478-fd2340d70fd107c9f0617a1e9'; //твой_ключ\n\nexport default {\n  async searchPhotos(query, page) {\n    const rawResult = await fetch(\n      `${BASE_URL}?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${KEY}`,\n    );\n    if (!rawResult.ok) {\n      throw rawResult;\n    }\n    const result = await rawResult.json();\n    return result;\n  },\n};\n","import preloaderFactory from '../preloader/preloader';\nimport photosService from '../services/apiService';\nimport photosListTemplate from '../../templates/photosList.hbs';\nimport debounce from 'lodash.debounce';\nimport '../../css/photos.css';\n\nconst preloader = preloaderFactory('.preloader');\n\n//  Class Photos template\nclass Photos {\n  // Constructor of class Photos\n  constructor(selector) {\n    this.element = document.querySelector(selector);\n    this.photos = [];\n    this.searchQuery = '';\n    this.page = 0;\n    this.observeEnable = true;\n  }\n\n  // Method of observerving of page-end and add new search-entries\n  addObserver() {\n    const observerOption = {\n      rootMargin: '100px',\n    };\n    const observerHandler = debounce(entries => {\n      if (!this.observeEnable) return;\n      if (entries[0].isIntersecting) {\n        this.page += 1;\n        this.searchPhotos(this.query, this.page);\n      }\n    }, 200);\n\n    const observer = new IntersectionObserver(observerHandler, observerOption);\n    const observerElement = document.createElement('div');\n\n    this.element.insertAdjacentElement('afterend', observerElement);\n    observer.observe(observerElement);\n  }\n\n  // Method of rendering searched photos\n  renderPhotos() {\n    const photosToRender = this.photos.map(photo => {\n      return {\n        ...photo,\n      };\n    });\n    const photosList = photosListTemplate(photosToRender);\n    this.element.innerHTML = photosList;\n  }\n\n  // Method of searching photos\n  searchPhotos(query) {\n    this.page = 1;\n    this.searchQuery = query;\n    this.photos = [];\n    this.photosService(this.searchQuery, this.page);\n  }\n\n  // Method of fetching photos\n  async photosService(query = '', page) {\n    this.searchQuery = query;\n    console.log(query);\n\n    try {\n      const { hits } = await photosService.searchPhotos(query, page);\n      console.log(hits);\n\n      this.photos = [...this.photos, ...hits];\n      this.renderPhotos();\n      // console.log(hits);\n    } catch (error) {\n      // TODO add users notify for errors\n      console.log(error);\n    } finally {\n      preloader.hide();\n    }\n  }\n\n  // Method of initialisation\n  init() {\n    this.addObserver();\n  }\n}\n\n// Creating a new object Photos\nconst photos = new Photos('.photos-list');\nphotos.init();\n\n// Search__Handler function\nconst searchHandler = debounce(({ target }) => {\n  if (target.name === 'search-query') {\n    photos.searchPhotos(target.value);\n    console.log(target.value);\n  }\n}, 1000);\n\n//  addEventListener to SearchForm__querySelector\nconst searchForm = document.querySelector('.search-form');\nsearchForm.addEventListener('input', searchHandler);\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.escapeExpression, alias2=depth0 != null ? depth0 : (container.nullContext || {}), alias3=container.hooks.helperMissing, alias4=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\n    <img src=\\\"\"\n    + alias1(container.lambda((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"photo-card__webformatURL\\\" class=\\\"photo-card__webformatURL\\\">\\n\\n    <div class=\\\"photo-card__stats\\\">\\n\\n        <p class=\\\"likes\\\">\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":25},\"end\":{\"line\":9,\"column\":34}}}) : helper)))\n    + \" <br \\\\ />likes</p> \\n\\n        <p class=\\\"views\\\">\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":25},\"end\":{\"line\":11,\"column\":34}}}) : helper)))\n    + \" <br \\\\ />views</p> \\n\\n        <p class=\\\"comments\\\">\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":28},\"end\":{\"line\":13,\"column\":40}}}) : helper)))\n    + \" <br \\\\ />comments</p> \\n\\n        <p class=\\\"downloads\\\">\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":29},\"end\":{\"line\":15,\"column\":42}}}) : helper)))\n    + \" <br \\\\ />downloads</p> \\n    </div>\\n    <span class=\\\"tags\\\">\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":23},\"end\":{\"line\":17,\"column\":31}}}) : helper)))\n    + \"</span>\\n</div>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(require(\"./photoCard.hbs\"),depth0,{\"name\":\"./photoCard.hbs\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":3,\"column\":9}}})) != null ? stack1 : \"\");\n},\"usePartial\":true,\"useData\":true});"],"sourceRoot":""}